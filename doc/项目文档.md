# 《网上菜谱分享平台》项目需求文档

## 1. 项目概述

本项目旨在构建一个基于 B/S 架构的网上菜谱分享平台。系统服务于烹饪爱好者，提供菜谱浏览、搜索、发布、互动（评论、收藏、关注、私信）等功能。系统采用前后端分离架构，后端使用 Spring Boot，前端使用 Vue 3。

## 2. 用户角色

系统包含三种角色：

1. **游客 (Visitor)**: 未登录用户，仅具有浏览和搜索权限。
2. **登录用户 (Member)**: 注册并登录的用户，拥有核心交互和内容发布权限。
3. **管理员 (Admin)**: 系统的运维人员，负责审核和基础数据管理。

## 3. 功能模块详解

### 3.1 公共模块（游客 & 登录用户）

- **菜谱浏览**:
  - 首页展示菜谱列表（包含菜名、图片）。
  - 支持按分类筛选：甜品、素菜、肉类、汤类、主食等。
- **菜谱搜索**:
  - 支持关键字搜索（菜谱名称）。
  - 支持组合搜索（分类 + 名称）。
- **菜谱详情**:
  - 展示内容：菜名、成品图、发布者信息（头像、用户名）、用料列表、制作步骤、用户评论列表。

### 3.2 用户交互模块（仅登录用户）

- **收藏功能**: 在菜谱详情页点击收藏，将菜谱加入个人收藏夹。
- **评论功能**: 在菜谱详情页底部发表评论。
- **关注/取关**:
  - 在菜谱详情页或用户主页点击“关注”按钮关注发布者。
  - 可在个人中心取消关注。
- **私信聊天**: 点击已关注用户，可发起一对一私聊（即时通讯或留言）。

### 3.3 个人中心模块（仅登录用户）

- **账户管理**:
  - 修改个人信息（昵称、头像等）。
  - 修改登录密码。
  - 退出登录。
- **发布菜谱 (核心流程)**:
  - 填写信息：菜名、封面图、用料、详细步骤（文字+图片）。
  - **审核机制**:
    - 提交后状态默认为“待审核”。
    - **审核通过**: 菜谱在前台公开展示，状态变为“已发布”，**此时不可修改**。
    - **审核未通过/待审核**: 菜谱不公开，用户**可以修改**菜谱信息重新提交。
- **我的发布**:
  - 列表展示：按发布时间倒序排列。
  - 查询/筛选：按时间或菜谱名称搜索。
  - 操作：删除菜谱、查看审核状态。
- **我的收藏**:
  - 列表展示收藏的菜谱。
  - 查询：按收藏时间或菜谱名称搜索。
  - 操作：取消收藏（删除记录）。
- **我的评论**:
  - 列表展示个人发布过的评论。
  - 查询：按时间或菜谱名称搜索。
  - 操作：删除评论。
- **我的关注**:
  - 列表展示关注的用户。
  - 查询：按用户名搜索。
  - 操作：取消关注、发起私聊。

### 3.4 后台管理模块（管理员）

- **用户审核/管理**:
  - 审核注册用户的身份信息（如需实名认证），或对违规用户进行封禁/管理。
- **菜谱审核**:
  - 查看用户提交的待审核菜谱。
  - 操作：**通过**（前台可见）或 **驳回**（需填写驳回原因，前台不可见）。
- **分类管理**:
  - 对菜谱分类（如川菜、粤菜、甜点等）进行增、删、改、查。

------

## 4. 业务流程逻辑（重点难点）

在开发时，需要特别注意以下两个逻辑，这是项目容易出Bug的地方：

### 4.1 菜谱状态流转逻辑

菜谱表中需要有一个 `status` 字段（例如：0-待审核, 1-审核通过, 2-审核失败）。

- **编辑权限控制**:
  - `IF status == 1`: 禁止用户调用 update 接口（前端隐藏编辑按钮，后端二次校验）。
  - `IF status == 0 OR 2`: 允许用户编辑。

### 4.2 关注与私聊逻辑

- **私聊前提**: 必须在“我的关注”列表中点击用户才能私聊（根据你的描述，这是一种单向或双向关系的限制，开发时需确认是关注了就能聊，还是互相关注才能聊，通常毕设做成“关注了即可聊”比较简单）。

------

## 5. 技术栈规划

- **前端**: Vue 3 (Composition API), Vue Router, Pinia (状态管理), Axios, Element Plus (UI组件库).
- **后端：**

| **组件**        | **版本/选型**       | **说明**                   |
| --------------- | ------------------- | -------------------------- |
| **JDK**         | 21                  | LTS 版本                   |
| **Spring Boot** | 3.5.x               | 核心框架                   |
| **Database**    | MySQL 8.0           | 数据存储                   |
| **ORM**         | MyBatis-Plus 3.5.x  | 持久层框架 (简化单表 CRUD) |
| **Auth**        | Spring Security 6.x | 认证与授权                 |
| **Token**       | JJWT 0.12.x         | JWT 工具                   |
| **Cache**       | Redis 7.x           | 缓存菜谱列表、Token 黑名单 |
| **API Docs**    | Knife4j 4.x         | 接口文档 (Swagger 增强版)  |
| **Tools**       | Lombok, Hutool      | 常用工具库                 |
| **Validation**  | Hibernate Validator | 参数校验 (`@NotBlank`)     |