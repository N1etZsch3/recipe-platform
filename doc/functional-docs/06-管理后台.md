# 管理后台

后台接口统一前缀：`/api/v1/admin`。除登录接口外均需管理员权限。

## 1. 管理员登录

- `POST /api/v1/admin/login`
  - 账号密码登录，返回 Token 与管理员基础信息。

## 2. 仪表盘

- `GET /api/v1/admin/dashboard`
  - 返回：用户/菜谱/评论/分类统计、月度统计、活跃用户、最近动态等。
  - 缓存：Redis 缓存 5 分钟。

## 3. 菜谱审核与管理

- `GET /api/v1/admin/recipes/audit`
  - 待审核菜谱列表。
- `POST /api/v1/admin/recipes/audit`
  - 单条审核（通过/驳回，支持填写驳回原因）。
- `GET /api/v1/admin/recipes`
  - 全量菜谱列表（支持状态与关键词筛选）。
- `DELETE /api/v1/admin/recipes/{id}`
  - 删除菜谱并清理关联数据。
- `POST /api/v1/admin/recipes/batch/audit`
  - 批量审核（pass/reject）。
- `PUT /api/v1/admin/recipes/batch/status`
  - 批量上架/下架/状态更新。

## 4. 分类管理

- `GET /api/v1/admin/categories`
- `POST /api/v1/admin/categories`
- `PUT /api/v1/admin/categories/{id}`
- `DELETE /api/v1/admin/categories/{id}`

说明：删除分类前会校验是否存在菜谱引用。

## 5. 用户管理

- `GET /api/v1/admin/users`
  - 支持关键词、角色、排序筛选。
- `POST /api/v1/admin/users`
  - 新增用户（禁止创建超级管理员）。
- `PUT /api/v1/admin/users/{id}`
  - 更新用户信息与角色。
- `PUT /api/v1/admin/users/{userId}/status`
  - 单个用户封禁/解封。
- `PUT /api/v1/admin/users/batch/status`
  - 批量封禁/解封（禁止操作超级管理员）。

## 6. 评论管理

- `GET /api/v1/admin/comments`
  - 评论列表（支持用户/菜谱/关键词筛选）。
- `DELETE /api/v1/admin/comments/{id}`

## 7. 操作日志

- `GET /api/v1/admin/logs`
  - 管理员操作日志分页查询。

## 8. 在线状态与踢下线

- `GET /api/v1/admin/users/online`
  - 查询用户在线状态。
- `POST /api/v1/admin/users/{userId}/kick`
  - 踢用户下线并关闭 WebSocket 会话。
