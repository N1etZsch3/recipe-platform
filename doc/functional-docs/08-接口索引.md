# 接口索引

本文档列出后端已实现的全部接口（按模块分组），用于快速检索与权限核对。

## 1. 认证与用户

| 方法 | 路径 | 权限 | 说明 |
| --- | --- | --- | --- |
| POST | `/api/v1/users/register` | 公开 | 用户注册（含验证码） |
| POST | `/api/v1/users/login` | 公开 | 用户登录（含验证码） |
| POST | `/api/v1/users/force-login` | 公开 | 强制登录（踢掉旧会话） |
| GET | `/api/v1/users/me` | 登录 | 获取当前用户信息 |
| PUT | `/api/v1/users/me` | 登录 | 更新个人资料 |
| PUT | `/api/v1/users/password` | 登录 | 修改密码 |
| POST | `/api/v1/users/logout` | 登录 | 退出登录（Token 拉黑） |
| GET | `/api/v1/captcha` | 公开 | 获取图形验证码 |

## 2. 通用能力

| 方法 | 路径 | 权限 | 说明 |
| --- | --- | --- | --- |
| POST | `/api/v1/common/upload` | 登录 | 上传文件（COS） |
| GET | `/api/v1/common/idempotent/token` | 登录 | 获取幂等 Token |

## 3. 菜谱（公开）

| 方法 | 路径 | 权限 | 说明 |
| --- | --- | --- | --- |
| GET | `/api/v1/recipes/categories` | 公开 | 分类列表 |
| GET | `/api/v1/recipes/list` | 公开 | 菜谱分页查询 |
| GET | `/api/v1/recipes/{id}` | 公开 | 菜谱详情 |

## 4. 菜谱（登录用户）

| 方法 | 路径 | 权限 | 说明 |
| --- | --- | --- | --- |
| POST | `/api/v1/recipes` | 登录 | 简化版发布菜谱 |
| PUT | `/api/v1/recipes` | 登录 | 简化版更新菜谱 |
| POST | `/api/v1/recipes/{id}/unpublish` | 登录 | 下架菜谱（改为待审核） |
| POST | `/api/v1/my/recipes` | 登录 | 完整发布菜谱 |
| PUT | `/api/v1/my/recipes` | 登录 | 完整更新菜谱 |
| DELETE | `/api/v1/my/recipes/{id}` | 登录 | 删除菜谱 |

## 5. 互动与评论

| 方法 | 路径 | 权限 | 说明 |
| --- | --- | --- | --- |
| POST | `/api/v1/interactions/favorite/{recipeId}` | 登录 | 收藏/取消收藏 |
| GET | `/api/v1/interactions/favorites` | 登录 | 我的收藏列表 |
| POST | `/api/v1/interactions/comments` | 登录 | 发表评论/回复 |
| DELETE | `/api/v1/interactions/comments/{commentId}` | 登录 | 删除评论 |
| POST | `/api/v1/interactions/comments/{commentId}/like` | 登录 | 点赞/取消点赞 |
| GET | `/api/v1/interactions/comments/{recipeId}` | 公开 | 评论列表 |
| GET | `/api/v1/interactions/comments/{parentId}/replies` | 公开 | 回复列表 |
| GET | `/api/v1/interactions/comments/{commentId}/likers` | 公开 | 点赞详情 |
| GET | `/api/v1/interactions/my-comments` | 登录 | 我的评论列表 |
| DELETE | `/api/v1/interactions/my-comments` | 登录 | 批量删除我的评论 |
| GET | `/api/v1/interactions/replies-for-me` | 登录 | 回复我的评论 |
| GET | `/api/v1/interactions/likes-for-me` | 登录 | 收到的点赞 |
| GET | `/api/v1/interactions/system-notifications` | 登录 | 系统通知列表 |

## 6. 社交与私信

| 方法 | 路径 | 权限 | 说明 |
| --- | --- | --- | --- |
| POST | `/api/v1/social/follow/{userId}` | 登录 | 关注/取关 |
| GET | `/api/v1/social/follows` | 登录 | 我的关注 |
| GET | `/api/v1/social/fans` | 登录 | 我的粉丝 |
| POST | `/api/v1/social/messages` | 登录 | 发送私信 |
| GET | `/api/v1/social/messages/{userId}` | 登录 | 获取聊天记录 |
| GET | `/api/v1/social/conversations` | 登录 | 获取会话列表 |
| GET | `/api/v1/social/user/{userId}` | 登录 | 用户公开信息 |
| PUT | `/api/v1/social/messages/read/{senderId}` | 登录 | 标记消息已读 |

## 7. 管理后台

| 方法 | 路径 | 权限 | 说明 |
| --- | --- | --- | --- |
| POST | `/api/v1/admin/login` | 公开 | 管理员登录 |
| GET | `/api/v1/admin/dashboard` | 管理员 | 仪表盘数据 |
| GET | `/api/v1/admin/recipes/audit` | 管理员 | 待审核菜谱列表 |
| POST | `/api/v1/admin/recipes/audit` | 管理员 | 审核菜谱 |
| POST | `/api/v1/admin/recipes/batch/audit` | 管理员 | 批量审核 |
| PUT | `/api/v1/admin/recipes/batch/status` | 管理员 | 批量更新菜谱状态 |
| GET | `/api/v1/admin/recipes` | 管理员 | 菜谱列表 |
| DELETE | `/api/v1/admin/recipes/{id}` | 管理员 | 删除菜谱 |
| GET | `/api/v1/admin/categories` | 管理员 | 分类列表 |
| POST | `/api/v1/admin/categories` | 管理员 | 新增分类 |
| PUT | `/api/v1/admin/categories/{id}` | 管理员 | 更新分类 |
| DELETE | `/api/v1/admin/categories/{id}` | 管理员 | 删除分类 |
| GET | `/api/v1/admin/users` | 管理员 | 用户列表 |
| POST | `/api/v1/admin/users` | 管理员 | 新增用户 |
| PUT | `/api/v1/admin/users/{id}` | 管理员 | 更新用户 |
| PUT | `/api/v1/admin/users/{userId}/status` | 管理员 | 修改用户状态 |
| PUT | `/api/v1/admin/users/batch/status` | 管理员 | 批量修改用户状态 |
| GET | `/api/v1/admin/users/online` | 管理员 | 用户在线状态 |
| POST | `/api/v1/admin/users/{userId}/kick` | 管理员 | 踢用户下线 |
| GET | `/api/v1/admin/comments` | 管理员 | 评论列表 |
| DELETE | `/api/v1/admin/comments/{id}` | 管理员 | 删除评论 |
| GET | `/api/v1/admin/logs` | 管理员 | 操作日志 |

## 8. WebSocket

- 端点：`/ws?token=...`
- 说明：连接时校验 Token，在线状态与通知推送均基于此通道。
