# 数据字典

本文档汇总关键表字段、枚举与状态码，便于前后端对齐口径。

## 1. 枚举与状态码

### 1.1 用户角色

| 值 | 说明 |
| --- | --- |
| admin | 超级管理员 |
| common_admin | 普通管理员 |
| member | 普通用户 |

### 1.2 用户状态（sys_user.status）

| 值 | 说明 |
| --- | --- |
| 1 | 正常 |
| 0 | 封禁 |

### 1.3 菜谱状态（recipe_info.status）

| 值 | 说明 |
| --- | --- |
| 0 | 待审核 |
| 1 | 已发布 |
| 2 | 驳回 |

### 1.4 评论与私信状态

| 字段 | 值 | 说明 |
| --- | --- | --- |
| recipe_comment.parent_id | null | 顶级评论 |
| sys_message.is_read | 0 | 未读 |
| sys_message.is_read | 1 | 已读 |
| comment_like | (comment_id + user_id) 唯一 | 防止重复点赞 |

### 1.5 排序参数

| 字段 | 值 | 说明 |
| --- | --- | --- |
| recipe list sort | new | 最新 |
| recipe list sort | hot | 最热（按浏览量） |

### 1.6 统一返回码

| code | 说明 |
| --- | --- |
| 200 | 操作成功 |
| 400 | 参数校验失败 |
| 401 | 未认证/Token 无效 |
| 403 | 无权限 |
| 404 | 接口不存在 |
| 409 | 账号已在线需确认 |
| 413 | 上传文件过大 |
| 500 | 服务器内部错误 |

## 2. 关键表字段

### 2.1 sys_user（用户表）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | BIGINT | 主键 |
| username | VARCHAR(50) | 登录账号（唯一） |
| password | VARCHAR(100) | 加密密码 |
| nickname | VARCHAR(50) | 昵称 |
| avatar | VARCHAR(255) | 头像URL |
| intro | VARCHAR(200) | 个人简介 |
| role | VARCHAR(20) | 角色 |
| status | TINYINT(1) | 用户状态 |
| create_time | DATETIME | 注册时间 |
| update_time | DATETIME | 更新时间 |

### 2.2 recipe_category（分类表）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | INT | 主键 |
| name | VARCHAR(50) | 分类名称 |
| sort_order | INT | 排序优先级 |
| create_time | DATETIME | 创建时间 |

### 2.3 recipe_info（菜谱主表）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | BIGINT | 主键 |
| title | VARCHAR(100) | 菜谱标题 |
| user_id | BIGINT | 作者ID |
| category_id | INT | 分类ID |
| cover_image | VARCHAR(255) | 封面URL |
| description | VARCHAR(500) | 简介 |
| status | TINYINT(1) | 菜谱状态 |
| reject_reason | VARCHAR(255) | 驳回原因 |
| view_count | INT | 浏览量 |
| create_time | DATETIME | 创建时间 |
| update_time | DATETIME | 更新时间 |

### 2.4 recipe_ingredient（用料表）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | BIGINT | 主键 |
| recipe_id | BIGINT | 菜谱ID |
| name | VARCHAR(50) | 食材名称 |
| amount | VARCHAR(50) | 用量 |
| sort_order | INT | 排序 |

### 2.5 recipe_step（步骤表）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | BIGINT | 主键 |
| recipe_id | BIGINT | 菜谱ID |
| step_no | INT | 步骤序号 |
| description | TEXT | 步骤描述 |
| image_url | VARCHAR(255) | 步骤图 |

### 2.6 user_favorite（收藏表）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | BIGINT | 主键 |
| user_id | BIGINT | 用户ID |
| recipe_id | BIGINT | 菜谱ID |
| create_time | DATETIME | 收藏时间 |

### 2.7 recipe_comment（评论表）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | BIGINT | 主键 |
| recipe_id | BIGINT | 菜谱ID |
| user_id | BIGINT | 评论者ID |
| parent_id | BIGINT | 父评论ID |
| content | VARCHAR(500) | 评论内容 |
| like_count | INT | 点赞数 |
| create_time | DATETIME | 评论时间 |

### 2.8 comment_like（评论点赞表）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | BIGINT | 主键 |
| comment_id | BIGINT | 评论ID |
| user_id | BIGINT | 点赞用户ID |
| create_time | DATETIME | 点赞时间 |

### 2.9 user_follow（关注表）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | BIGINT | 主键 |
| follower_id | BIGINT | 发起关注者ID |
| followed_id | BIGINT | 被关注者ID |
| create_time | DATETIME | 关注时间 |

### 2.10 sys_message（私信表）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | BIGINT | 主键 |
| sender_id | BIGINT | 发送者ID |
| receiver_id | BIGINT | 接收者ID |
| content | TEXT | 私信内容 |
| is_read | TINYINT(1) | 是否已读 |
| create_time | DATETIME | 发送时间 |

### 2.11 admin_operation_log（管理员操作日志）

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | BIGINT | 主键 |
| admin_id | BIGINT | 管理员ID |
| admin_name | VARCHAR(50) | 管理员用户名 |
| operation_type | VARCHAR(50) | 操作类型 |
| target_type | VARCHAR(50) | 目标类型 |
| target_id | BIGINT | 目标ID |
| target_name | VARCHAR(100) | 目标名称 |
| detail | VARCHAR(500) | 操作详情 |
| ip_address | VARCHAR(50) | IP地址 |
| create_time | DATETIME | 操作时间 |
