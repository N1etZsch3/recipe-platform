# 互动与评论

本模块涵盖收藏、评论、回复、点赞以及“信息中心”类查询接口。

## 1. 收藏

- `POST /api/v1/interactions/favorite/{recipeId}`
  - 登录用户收藏/取消收藏切换。
- `GET /api/v1/interactions/favorites`
  - 我的收藏列表（分页）。

## 2. 评论与回复

- `POST /api/v1/interactions/comments`
  - 发表评论（支持回复）。
  - 请求字段：`recipeId` / `parentId` / `content`。
  - 限流与幂等：用户级限流 + `X-Idempotent-Token`。
- `GET /api/v1/interactions/comments/{recipeId}`
  - 获取菜谱顶级评论列表（公开）。
  - 返回值含评论作者信息、是否已点赞、回复数与首条回复。
- `GET /api/v1/interactions/comments/{parentId}/replies`
  - 获取指定评论的回复列表（公开）。
- `DELETE /api/v1/interactions/comments/{commentId}`
  - 删除评论（评论作者或管理员）。

## 3. 点赞

- `POST /api/v1/interactions/comments/{commentId}/like`
  - 点赞/取消点赞。
  - 点赞数写入评论表 `like_count`。

## 4. 信息中心

- `GET /api/v1/interactions/my-comments`
  - 我发布过的评论与回复列表。
- `DELETE /api/v1/interactions/my-comments`
  - 批量删除我的评论（请求体为评论 ID 列表）。
- `GET /api/v1/interactions/replies-for-me`
  - 回复我的评论列表。
- `GET /api/v1/interactions/likes-for-me`
  - 收到的点赞列表（按我的评论聚合）。
- `GET /api/v1/interactions/comments/{commentId}/likers`
  - 指定评论的点赞者详情。
- `GET /api/v1/interactions/system-notifications`
  - 当前实现返回空列表（预留扩展）。

## 5. 业务细节

- 评论支持父子结构，`parentId` 为空代表顶级评论。
- 删除评论会连带删除其回复与点赞记录。
- 发表评论/点赞会触发 WebSocket 通知（在线用户）。
